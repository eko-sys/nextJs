{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Loader from 'react-loader-spinner';\n\nclass ProductModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      numberTarget: '',\n      productTarget: '',\n      listProduct: null,\n      typeProduct: {\n        provaider_id: null\n      },\n      title: () => {\n        if (this.props.type === 'pulsa') {\n          return 'Pulsa';\n        } else if (this.props.type === 'data') {\n          return \"Paket Data\";\n        } else if (this.props.type === 'vdata') {\n          return \"Voucher Data\";\n        }\n      },\n      loading: false\n    };\n  }\n\n  apiPpob(provaider) {\n    const currentUrl = window.location.href;\n    const uriSegment = currentUrl.split('/');\n    const host = uriSegment[2];\n    this.setLoading(true);\n    const apiUrl = `http://${host}/api/product/pulsa`;\n    fetch(apiUrl, {\n      method: 'get',\n      headers: {\n        \"Authorization\": `Bearer ${this.props.token}`\n      }\n    }).then(res => res.json()).then(res => {\n      this.setState({\n        listProduct: res.data\n      });\n      this.setState({\n        typeProduct: {\n          provaider_id: provaider\n        }\n      });\n    }).then(this.setLoading(false));\n  }\n\n  orderHandler() {\n    const {\n      productTarget,\n      numberTarget\n    } = this.state;\n\n    if (numberTarget || productTarget) {\n      this.apiPpobReqOrder(numberTarget, productTarget);\n    } else {\n      alert('Oops!, nomor atau produk kelupaan :)');\n    }\n  }\n\n  apiPpobReqOrder(number, product) {\n    const currentUrl = window.location.href;\n    const uriSegment = currentUrl.split('/');\n    const host = uriSegment[2];\n    this.setLoading(true);\n    const apiUrl = `http://${host}/api/product/pulsa/request?action=order&service=${product}&target=${number}`;\n    fetch(apiUrl, {\n      method: 'post',\n      headers: {\n        \"Authorization\": `Bearer ${this.props.token}`\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.result) {\n        alert(res.data);\n      } else if (res.status || res.status == false) {\n        alert(res.msg);\n      }\n    }).then(this.setLoading(false));\n  }\n\n  setLoading(val) {\n    this.setState({\n      loading: val\n    });\n  }\n\n  onChangeNumber(number) {\n    const three = ['0895', '0896', '0897', '0898', '0899'];\n    const smart = ['0881', '0882', '0883', '0884', '0885', '0886', '0887', '0888', '0889'];\n    const axis = ['0838', '0831', '0832', '0833'];\n    const tsel = ['0811', '0812', '0813', '0821', '0822', '0852', '0853', '0823'];\n    const xl = ['0817', '0818', '0819', '0859', '0877', '0878'];\n    const isat = ['0814', '0815', '0816', '0855', '0856', '0857', '0858'];\n    const byU = ['0851'];\n    const frontNumb = number.target.value.slice(0, 4);\n    this.setState({\n      userSelect: {\n        numberTarget: number.target.value\n      }\n    });\n\n    if (three.includes(frontNumb)) {\n      this.apiPpob(3);\n    } else if (smart.includes(frontNumb)) {\n      this.apiPpob(5);\n    } else if (xl.includes(frontNumb)) {\n      this.apiPpob(6);\n    } else if (tsel.includes(frontNumb)) {\n      this.apiPpob(1);\n    } else if (isat.includes(frontNumb)) {\n      this.apiPpob(2);\n    } else if (axis.includes(frontNumb)) {\n      this.apiPpob(4);\n    } else if (byU.includes(frontNumb)) {\n      this.apiPpob(7);\n    }\n  }\n\n  onChangeSelect(e) {\n    this.setState({\n      userSelect: {\n        productTarget: e.target.value\n      }\n    });\n  }\n\n  toRpID(value) {\n    var reverse = value.toString().split('').reverse().join(''),\n        ribuan = reverse.match(/\\d{1,3}/g);\n    ribuan = ribuan.join('.').split('').reverse().join('');\n    return ribuan;\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"modal fade\",\n      id: \"productModal\",\n      tabIndex: \"-1\",\n      role: \"dialog\",\n      \"aria-labelledby\": \"exampleModalLabel\",\n      \"aria-hidden\": \"true\"\n    }, __jsx(\"div\", {\n      className: \"modal-dialog modal-dialog-centered\",\n      role: \"document\"\n    }, __jsx(\"div\", {\n      className: \"modal-content\"\n    }, __jsx(\"div\", {\n      className: \"modal-header\"\n    }, __jsx(\"h5\", {\n      className: \"modal-title\",\n      id: \"exampleModalLabel\"\n    }, this.state.title()), __jsx(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\"\n    }, __jsx(\"span\", {\n      \"aria-hidden\": \"true\"\n    }, \"\\xD7\"))), __jsx(\"div\", {\n      className: \"modal-body\"\n    }, __jsx(\"div\", {\n      className: \"form-group mb-3\"\n    }, __jsx(\"div\", {\n      className: \"input-group input-group-merge input-group-alternative\"\n    }, __jsx(\"div\", {\n      className: \"input-group-prepend\"\n    }, __jsx(\"span\", {\n      className: \"input-group-text\"\n    }, __jsx(\"i\", {\n      className: \"ni ni-email-83\"\n    }))), __jsx(\"input\", {\n      value: this.state.numberTarget,\n      className: \"form-control\",\n      onChange: e => {\n        this.onChangeNumber(e);\n      },\n      placeholder: \"No Tujuan\",\n      type: \"number\",\n      required: true\n    }))), __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"div\", {\n      className: \"input-group input-group-merge input-group-alternative\"\n    }, __jsx(\"div\", {\n      className: \"input-group-prepend\"\n    }, __jsx(\"span\", {\n      className: \"input-group-text\"\n    }, __jsx(\"i\", {\n      className: \"ni ni-email-83\"\n    }))), __jsx(\"select\", {\n      value: this.state.productTarget,\n      onChange: e => {\n        this.onChangeSelect(e);\n      },\n      className: \"form-control\"\n    }, this.state.listProduct ? __jsx(React.Fragment, null, __jsx(\"option\", {\n      value: \"\"\n    }, \"Pilih Product\"), this.state.listProduct.map(data => {\n      if (data.provaider_id == this.state.typeProduct.provaider_id && data.type == this.props.type) {\n        return __jsx(\"option\", {\n          value: data.product_code\n        }, data.product_name);\n      }\n    })) : __jsx(\"option\", null, \"Service unrecognized\"))))), __jsx(\"div\", {\n      className: \"text-center\"\n    }, this.state.productTarget ? this.state.listProduct.map(data => {\n      if (this.state.productTarget == data.product_code) {\n        return __jsx(\"div\", null, __jsx(\"h5\", null, data.note), __jsx(\"h5\", null, \"Harga: \", this.toRpID(data.price)));\n      }\n    }) : null), __jsx(\"div\", {\n      className: \"modal-footer\"\n    }, __jsx(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      \"data-dismiss\": \"modal\"\n    }, \"Tutup\"), __jsx(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        this.orderHandler();\n      },\n      className: \"btn btn-primary\"\n    }, \"Beli\")))), this.state.loading ? __jsx(\"div\", {\n      className: \"fixed-bottom d-flex justify-content-center\"\n    }, __jsx(Loader, {\n      type: \"ThreeDots\",\n      color: \"#ffff00\",\n      height: 70,\n      width: 70\n    })) : null);\n  }\n\n}\n\nexport default ProductModal;","map":{"version":3,"sources":["C:/Users/Administrator/Documents/nodejs/nextExpress/component/views/product/modalView.js"],"names":["Loader","ProductModal","React","Component","constructor","props","state","numberTarget","productTarget","listProduct","typeProduct","provaider_id","title","type","loading","apiPpob","provaider","currentUrl","window","location","href","uriSegment","split","host","setLoading","apiUrl","fetch","method","headers","token","then","res","json","setState","data","orderHandler","apiPpobReqOrder","alert","number","product","result","status","msg","val","onChangeNumber","three","smart","axis","tsel","xl","isat","byU","frontNumb","target","value","slice","userSelect","includes","onChangeSelect","e","toRpID","reverse","toString","join","ribuan","match","render","map","product_code","product_name","note","price"],"mappings":"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","sourcesContent":["import Loader from 'react-loader-spinner';\r\n\r\nclass ProductModal extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            numberTarget: '',\r\n            productTarget: '',\r\n            listProduct: null,\r\n            typeProduct: {\r\n                provaider_id: null\r\n            },\r\n            title: () => {\r\n                if(this.props.type === 'pulsa'){\r\n                    return 'Pulsa';\r\n                }else if(this.props.type === 'data'){\r\n                    return \"Paket Data\";\r\n                }else if(this.props.type === 'vdata'){\r\n                    return \"Voucher Data\";\r\n                }\r\n            },\r\n            loading: false\r\n        }\r\n    }\r\n\r\n   apiPpob(provaider){\r\n        const currentUrl = window.location.href;\r\n        const uriSegment = currentUrl.split('/');\r\n        const host = uriSegment[2];\r\n\r\n        this.setLoading(true)\r\n        const apiUrl = `http://${host}/api/product/pulsa`;\r\n        fetch(apiUrl,{\r\n            method: 'get',\r\n            headers: {\r\n                \"Authorization\": `Bearer ${this.props.token}`\r\n            }\r\n        }).then(res => res.json()).then(res => {\r\n            this.setState({\r\n                listProduct: res.data\r\n            });\r\n\r\n            this.setState({\r\n                typeProduct: {\r\n                    provaider_id: provaider\r\n                }\r\n            })\r\n        }).then(this.setLoading(false))\r\n   }\r\n\r\n   orderHandler(){\r\n       const {productTarget, numberTarget} = this.state\r\n       if(numberTarget || productTarget){\r\n        this.apiPpobReqOrder(numberTarget, productTarget);\r\n       }else{\r\n           alert('Oops!, nomor atau produk kelupaan :)')\r\n       }\r\n   }\r\n\r\n   apiPpobReqOrder(number, product){\r\n        const currentUrl = window.location.href;\r\n        const uriSegment = currentUrl.split('/');\r\n        const host = uriSegment[2];\r\n        \r\n        this.setLoading(true)\r\n        const apiUrl = `http://${host}/api/product/pulsa/request?action=order&service=${product}&target=${number}`;\r\n        fetch(apiUrl,{\r\n            method: 'post',\r\n            headers: {\r\n                \"Authorization\": `Bearer ${this.props.token}`\r\n            }\r\n        }).then(res => res.json()).then(res => {\r\n            if(res.result){\r\n                alert(res.data)\r\n            }else if(res.status || res.status == false){\r\n                alert(res.msg)\r\n            }\r\n        }).then(this.setLoading(false))\r\n   }\r\n\r\n   setLoading(val){\r\n        this.setState({\r\n            loading: val\r\n        })\r\n   }\r\n\r\n   onChangeNumber(number){\r\n    const three = ['0895', '0896', '0897', '0898', '0899'];\r\n    const smart = ['0881', '0882', '0883', '0884', '0885', '0886', '0887', '0888', '0889'];\r\n    const axis = ['0838', '0831', '0832', '0833'];\r\n    const tsel = ['0811', '0812', '0813', '0821', '0822', '0852', '0853', '0823', ];\r\n    const xl = ['0817', '0818', '0819', '0859', '0877', '0878'];\r\n    const isat = ['0814', '0815', '0816', '0855', '0856', '0857', '0858'];\r\n    const byU = ['0851'];\r\n\r\n    const frontNumb = number.target.value.slice(0, 4)\r\n\r\n        this.setState({\r\n            userSelect: {\r\n                numberTarget: number.target.value\r\n            }\r\n        })\r\n        \r\n        if(three.includes(frontNumb)){\r\n            this.apiPpob(3);\r\n        }else if(smart.includes(frontNumb)){\r\n            this.apiPpob(5);\r\n        }else if(xl.includes(frontNumb)){\r\n            this.apiPpob(6);\r\n        }else if(tsel.includes(frontNumb)){\r\n            this.apiPpob(1);\r\n        }else if(isat.includes(frontNumb)){\r\n            this.apiPpob(2);\r\n        }else if(axis.includes(frontNumb)){\r\n            this.apiPpob(4);\r\n        }else if(byU.includes(frontNumb)){\r\n            this.apiPpob(7);\r\n        }\r\n   }\r\n\r\n   onChangeSelect(e){\r\n       this.setState({\r\n           userSelect: {\r\n               productTarget: e.target.value\r\n           }\r\n       })\r\n   }\r\n\r\n   toRpID(value){\r\n        var reverse = value.toString().split('').reverse().join(''),\r\n        ribuan = reverse.match(/\\d{1,3}/g);\r\n        ribuan = ribuan.join('.').split('').reverse().join('');\r\n        return ribuan;\r\n    }\r\n\r\n    render(){\r\n        return(\r\n                <div className=\"modal fade\" id=\"productModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <h5 className=\"modal-title\" id=\"exampleModalLabel\">{this.state.title()}</h5>\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <div className=\"form-group mb-3\">\r\n                                <div className=\"input-group input-group-merge input-group-alternative\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\"><i className=\"ni ni-email-83\"></i></span>\r\n                                    </div>\r\n                                    <input value={this.state.numberTarget} className=\"form-control\" onChange={(e) => {\r\n                                        this.onChangeNumber(e)\r\n                                    }} placeholder=\"No Tujuan\" type=\"number\" required/>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                            <div className=\"input-group input-group-merge input-group-alternative\">\r\n                                    <div className=\"input-group-prepend\">\r\n                                    <span className=\"input-group-text\"><i className=\"ni ni-email-83\"></i></span>\r\n                                    </div>\r\n                                        <select value={this.state.productTarget} onChange={(e) => {\r\n                                            this.onChangeSelect(e);\r\n                                        }} className=\"form-control\">\r\n                                            { this.state.listProduct ?\r\n                                                <>\r\n                                                    <option value=\"\">Pilih Product</option>\r\n                                                    { this.state.listProduct.map(data => {\r\n                                                        if(data.provaider_id == this.state.typeProduct.provaider_id && data.type == this.props.type){\r\n                                                            return(\r\n                                                                <option value={data.product_code}>{data.product_name}</option>\r\n                                                            )\r\n                                                        }\r\n                                                      })\r\n                                                    }\r\n                                                </>\r\n                                             :\r\n                                                <option>Service unrecognized</option>\r\n                                            }\r\n                                        </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"text-center\" >\r\n                            { this.state.productTarget ?\r\n                                this.state.listProduct.map(data => {\r\n                                    if(this.state.productTarget == data.product_code){\r\n                                        return(\r\n                                            <div>\r\n                                                <h5>{data.note}</h5>\r\n                                                <h5>Harga: {this.toRpID(data.price)}</h5>\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                })\r\n                                :\r\n                                null\r\n                            }\r\n                        </div>\r\n\r\n                        <div className=\"modal-footer\">\r\n                            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Tutup</button>\r\n                            <button type=\"button\" onClick={() => {\r\n                                this.orderHandler();\r\n                            }} className=\"btn btn-primary\">Beli</button>\r\n                        </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    { this.state.loading ?\r\n                        <div className=\"fixed-bottom d-flex justify-content-center\">\r\n                            <Loader type=\"ThreeDots\" color=\"#ffff00\" height={70} width={70} />\r\n                        </div>\r\n                     :\r\n                        null\r\n                    }\r\n                </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default ProductModal;"]},"metadata":{},"sourceType":"module"}